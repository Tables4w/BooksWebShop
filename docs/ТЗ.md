# ТЗ – интернет-магазин книг
## 1.	Цель проекта
Вы являетесь руководителем организации, занимающейся продажей бумажных книг из книжного магазина онлайн. 
Ваши клиенты – люди организации, заинтересованные в приобретении книг. Вам необходимо предоставить клиентам доступ к получению необходимых книг. 
При работе с клиентами для вас является существенной информацией о нем – ФИО, e-mail, телефон.
## 2.	Описание системы
Система состоит из следующих функциональных блоков:
1.	Регистрация и авторизация
2.	Функционал для каждого пользователя
3.	Функционал снятия средств с баланса клиента
4.	Личный кабинет
5.	Каталог
6.	Корзина
a.	Оформление заказа
7.	Список заказов
8.	Список сотрудников \
## 3.	Типы пользователей
Система предусматривает 4 вида пользователей системы:
### 3.1 Неавторизированный клиент
Возможности неавторизированного клиента: \
•	Зарегистрироваться/авторизоваться в системе \
•	Смотреть каталог \
•	Смотреть книгу \
•	Смотреть корзину \
![Неавторизированнй клиент Схема](<./usecase/неавторизированный клиент.PNG>)
### 3.2 Авторизованный клиент
Возможности авторизованного клиента включают в себя все возможности неавторизованного клиента, кроме регистрации, и дополняет их данными функциями:\
•	Оформлять заказ\
•	Просматривать историю своих заказов\
•	Пополнять свой баланс\
•	Просматривать данные профиля и редактировать их\
•	Удалить аккаунт\
 ![Авторизированнй клиент Схема](<./usecase/авторизованный клиент.PNG>)
 
### 3.3 Менеджер
Возможности менеджера: \
•	Войти в систему \
•	Просмотреть список заказов \
•	Просмотреть заказ и изменить его статус \
•	Просмотреть каталог \
•	Просмотреть книгу, редактировать ее данные \
•	Удалить книгу \
•	Добавить книгу \
•	Взаимодействие с тегами: добавление и удаление \
![Менеджер Схема](<./usecase/менеджер.PNG>)
### 3.4 Админ
Админ обладает всеми возможностями менеджера и дополнительно следующими функциями: \
•	Добавить менеджера \
•	Удалить менеджера \
•	Просмотреть список менеджеров \
![Админ Схема](<./usecase/админ.PNG>)
 
## 4. Регистрация
### 4.1 Регистрация  клиента
 Предусмотренные поля: \
•	Фамилия \
•	Имя \
•	Пол (мужской/женский) \
•	Дата рождения \
•	Почта \
•	Пароль \
•	Подтверждение пароля \
•	Согласие с обработкой персональных данных \


__Возможные ошибки:__ 


•	Поле имя – содержит только буквы русского или латинского алфавита А-Я, а-я, A-Z, a-z и специальные символы: «’», «-». \
•	Поле фамилия – содержит только буквы русского или латинского алфавита А-Я, а-я, A-Z, a-z. \
•	Поле почта – содержит только буквы латинского алфавита, специальные символы: -, _. Обязателен символ @. Обязателен символ “.”  после @. \
•	Поле дата рождения – дата не должна превышать дату заполнения полей. \
•	Согласие с обработкой персональных данных -  без подтверждения этого поля регистрация пользователя не происходит. \
•	Пароль -  содержит не менее 8 символов, должен состоять из букв латинского алфавита и арабских цифр. \
•	Подтверждение пароля – должен полностью совпадать с введенным данным в поле «Пароль». \
Проверить e-mail на уникальность, в случае уже имеющейся данной почты в системе выводится «данная почта уже зарегистрирована». \
### 4.2 Регистрация менеджера и админа
Админ будет введен вручную в бд и будет иметь логин и пароль, сформированный случайным образом. Админ будет иметь всего один аккаунт. 
В его кабинете есть возможность зарегистрировать нового менеджера и удалить имеющегося. \
	Данные предоставляемые сотрудником админу для регистрации: \
•	Имя \
•	Фамилия \
•	почта \
После создания нового сотрудника, ему предоставляется сгенерированный уникальный код (логин) и пароль для входа в систему.

__Возможные ошибки__

•	Поле имя – содержит только буквы русского или латинского алфавита А-Я, а-я, A-Z, a-z и специальные символы: «’», «-». \
•	Поле фамилия – содержит только буквы русского или латинского алфавита А-Я, а-я, A-Z, a-z. \
•	Поле почта – содержит только буквы латинского алфавита, специальные символы: -, _. Обязателен символ @. Обязателен символ “.”  после @. \

### 4.3 Авторизация
Авторизация клиента осуществляется по e-mail и паролю. Авторизация менеджера и админа – по логину и паролю.
## 5. Функционал неавторизованного клиента
До авторизации клиент имеет доступ к следующему функционалу: \
• Главная страница \
• Просмотр каталога книг \
• Поиск \
• Просмотр информации о книге \
• Добавление и удаление книг из корзины \
• Авторизация/регистрация \
### 5.1 Главная страница
В этом разделе клиент может ознакомиться с уникальными предложениями интернет-магазина, а также получить доступ ко всему остальному функционалу, такому как каталог, корзина, вход/регистрация, поиску. 
Сами предложения состоят из специализированной рекламы, бестселлеров и новинок. Поиск ищет по совпадениям буквосочетаний в названиях книг и переходит на отсортированный каталог, где показываются результаты.
### 5.2 Каталог
В этом разделе клиент может ознакомиться со всем имеющимся ассортиментом товаров в магазине, а также выбрать книгу по имеющимся предпочтениям и добавить её в корзину. 
Каждая книга в каталоге представляет название, автора, цену, и обложку.
Также отсюда клиент имеет доступ к странице каждой книги, которая хранит всю информации о ней. \
Фильтры, по которым можно отсортировать каталог, делятся на 3 вида: по жанрам, по авторам, по году выпуска. Сортировка подразумевает возможность использования сразу нескольких видов фильтров. \
Сортировка по жанрам и авторам представляет собой мультивыбор из имеющимся в наличии. Сортировка по году выпуска представляет собой выбор временного интервала, в течение которого были выпущены данные книги. \
Внизу каждой книги есть кнопка "добавить в корзину", которая помещает выбранную книгу в корзину.
### 5.3 Информация о книге
В этом разделе клиент имеет возможность получить всю информацию и выбранной книге, а именно: название, авторы, жанры, год выпуска, аннотацию и цену, поместить данную книгу в корзину.
### 5.4 Корзина
В этом разделе неавторизированный клиент имеет доступ просмотреть список выбранных им книг, удалить книгу из списка, выделить необходимые ему книги и выбрать их количество, в результате этих выделений можно узнать стоимость данной покупки. \
![Пример корзины](<./usecase/Корзина-пример.PNG>)
В случае попытки оформить заказ выносится ошибка: "Оформление заказа доступно только зарегистрированными пользователями". \
### 5.6 Авторизация/регистрация
Описание в пункте 4.
## 6. Функционал авторизированного клиента
Авторизированный клиент имеет доступ ко всем функциям, доступным неавторизированному пользователю и дополнительно: \
• Профиль \
• Оформление заказа \
• Пополнение баланса \
• Просмотр заказов 
### 6.1 Профиль
В данном разделе пользователь имеет возможность отредактировать свои личные данные, удалить аккаунт, посмотреть список заказов, пополнить баланс. /
Редакции можно подвергнуть все личные данные: фамилия, имя, возраст, пол. А также почту и пароль для входа. Все ТТ сохраняются как в регистрации клиента (п. 4.1). При редактировании пароля и почты запрашивается подтверждение. \
При попытке удаления аккаунта запрашивается подтверждение. После подтверждения пользователь переходит на главную страницу в качестве незарегистрированного пользователя. Аккаунт невозможно восстановить \
### 6.2 Оформление заказа
Оформление заказа происходит на странице "Корзина" (п. 5.4) с помощью кнопки "Оформить заказ".  Если корзина пустая, выносится ошибка: "Корзина пустая". Если баланс клиента меньше суммы заказа выносится ошибка: "На вашем счете недостаточно средств. Пополните баланс". После оформления заказа книги, участвующие в заказе, удаляются из корзины, баланс уменьшается на сумму заказа, в списке заказов появляется новый заказ со статусом "Оформлен".
### 6.3 Пополнение баланса
Пополнение баланса происходит на странице профиля, предусмотренные поля: \
• Номер карты \
• Срок действия \
• CVC/CVV-код \
• Сумма пополнения \
__возможные ошибки__ \
• Номер карты - содержит 16-19 цифр \
• Срок действия - вид: мм/гг \
• CVC/CVV код - содержит 3 цифры \
• Сумма пополнения - содержит положительное число

### 6.4 Просмотр заказов
Список заказов находится в профиле и раделяется на 2 категории: актуальные и завершенные. Актуальные содержат заказы со статусом "оформлен" или "готов к получению". Завершенные содержат заказы со статусом "получен" или "отказ". Каждый заказ содержит в себе информацию: код заказа, дату оформления, статус, список книг в заказе, его сумма. \
## 7. Функционал менеджера
Менеджер имеет доступ к следующим функциям: \
• Профиль \
• Изменение статуса заказа \
• Редактирование данных книги \
• Добавление книги \
• Удаление книги \
• Взаимодействие с тегами: добавление и удаление
### 7.1 Профиль
Профиль менеджера представляет собой список всех активных заказов (со статусом "Оформлен" и "Готов к получению").
### 7.2 Изменение статуса заказа
У каждого заказа, представленного в списке, менеджер имеет возможность изменить его статус. Возможные варианты: оформлен, готов к получению, отказ, получен.
### 7.3 Добавление книги
Добавление книги происходит из каталога, предусмотрены поля: \
• Название \
• Обложка \
• Авторы \
• Жанры \
• Издательство \
• Год выпуска \
• Аннотация \
• Цена \
Авторы, Издательство и Жанры является мультивыбором соответствующих тегов. \
__возможные ошибки__ \
• Название - не пустое поле \
• Обложка - файл _(не знаю какие ограничения нужны)_ \
• Год выпуска - не должен превышать текущую дату \
• Аннотация - количество символов не превышает _(предложите число)_ \
• Цена - целое положительное число
### 7.4 Редактирование данных книги
На странице книги менеджер имеет возможность перейти на форму редактирования книги. Редактирование возможно любых полей (обложка, название, годы выпуска, авторы, жанры, аннотация, цена).
### 7.5 Удаление книги
На странице книги менеджер имеет возможность удалить данную книгу. При удалении запрашивается подтверждение. После удаления книга восстановлению не подлежит. После согласия с удалением менеджер переходит в каталог.
### 7.6 Теги
Вынос таких тегов как Авторы, Жанры, Издательство обусловлен целью избежать повторения одних и тех же тегов в разных вариациях написания. _(Пример: Лев Толстой, Лев Николаевич Толстой, Л.В.Толстой и т.д.)_ \
Добавление тегов происходит из каталога. Предусмотрены поля: \
• Название тега \
• Вид тега \
Вид тега представляет собой выбор между классами тегов: Жанр, Автор, Издательство. \
Название тега - непустое текстовое поле. \
Удаление тега происходит из каталога и является формой, содержащей поля: \
• К удаляемого тега - выбор: Жанр, Автор, Издательство \
• Выбор тега из списка выбранного вида тега \ 
После удаления тега его восстановление невозможно.
## 8. Функционал админа
Админ обладает всеми функциями менеджера, дополнительно: \
• Добавление сотрудников \
• Удаление сотрудников \
• Просмотр списка сотрудников
### 8.1 Добавление сотрудников
Добавление менеджера происходит согласно п. 4.2. Добавление доступно из списка менеджеров.
### 8.2 Удаление сотрудников
Удаление происходит на странице списка менеджеров. При попытке удаления запрашивается подтверждение. Удаленного сотрудника невозможно восстановить.
### 8.3 Просмотр списка сотрудников
Находится в профиле наравне со списком заказов.
